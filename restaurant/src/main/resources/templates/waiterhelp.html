<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Home</title>
    <link th:href="@{/styles/ordering-menu.css}" rel="stylesheet" type="text/css">
    </link>
    <link th:href="@{/styles/orders.css}" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</head>

<body>
<!-- The header -->
<header>
    <a href="#" class="logo">Oaxaca</a>
    <nav class="navbar">
        <a href="waiterhome">Home</a>
        <a th:href="menuChange">Change Menu</a>
        <a href="#">Contact us</a>
        <a href="waiterOrder">Keep Track of Orders</a>
        <a th:href="waiterhelps">Help</a>
        <div class="navbar-right">
            <div class="logoutb">
                <button class="logoutdrop" th:text="${session.user.getUsername}"></button>
                <div class="dropcontent">
                    <form th:action="@{/logout}" th:method="post">
                        <button class="logout" type="submit">Logout</button>
                    </form>
                </div>
            </div>
        </div>
    </nav>
</header>

<div class="tables">
    <table class="ordersTable">
        <thead>
        <tr><th>Help Requests</th><tr>
        <th th:if="${helps!=null}" scope="row">Help State</th>
        <th th:if="${helps!=null}" scope="row">User Id</th>
        <th th:if="${helps!=null}" scope="row">Update help</th>
        </thead>
        <tr th:each="help: ${helps}">
            <td th:text="${help.state}"></td>
            <td th:text="${help.userid}"></td>
            <td th:if="${help.state=='needs help'}">
                <form th:action="@{/accepthelp}" method="get">
                    <button type="submit">Accept Help</button>
                    <input type="hidden" name="helpid" th:value="${help.helpid}"/>
                </form>
            </td>
            <td th:if="${help.state=='helping'}">
                <form th:action="@{/closehelp}" method="get">
                    <button type="submit">Close Help</button>
                    <input type="hidden" name="helpid" th:value="${help.helpid}"/>
                </form>
            </td>
        </tr>
    </table>
</div>

<section class="tables">
    <table class="ordersTable">
        <thead>
        <tr><th>Cancellation Requests</th><tr>
        <tr>
            <th>Order ID</th>
            <th>Time placed</th>
            <th>Status</th>
            <th>Cancel?</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item: ${CancelStateOrder}">
            <td th:text="${item.getOrderId()}"></td>
            <td th:text="${item.timeplaced}"></td>
            <td th:text="Cancellation Request"></td>
            <td>
                <form th:action="@{/viewDetailsForReady}" th:method="post">
                    <button type="submit">View</button>
                    <input type="hidden" name ="input" th:value="${item.getOrderId()}"/>
                </form>
            </td>
            <td>
                <form th:action="@{/deleteOrder}" th:method="post">
                    <button type="submit">Yes</button>
                    <input type="hidden" name ="input" th:value="${item.getOrderId()}"/>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</section>

</body>

</html>