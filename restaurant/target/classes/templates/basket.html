<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Basket</title>
    <link th:href="@{/styles/ordering-menu.css}" rel="stylesheet" type="text/css"></link>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css"/>
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
</head>
<body>
    <!-- The header -->
    <header>
        <a href="#" class="logo">ResturantNameHere</a>
        <nav class="navbar">
            <a href="#">Home</a> <a href="orderingmenu">dishes</a> <a href="#">Contact
            us</a> <a href="#">Orders</a>
        </nav>
    </header>

    <section class="table">
        <table class="basket-table">
            <thead>
                <tr>
                    <th align="left">PRODUCT</th>
                    <th align="left">QTY</th>
                    <th align="left">PRICE</th>
                    <th align="left">ADD</th>
                    <th align="right">REMOVE</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="item: ${basketItems}">
                    <td class="qty" th:text="${item.name}"></td>
                    <td th:text="${item.quantity}"></td>
                    <td th:text="'£'+${item.priceSum}"></td>
                    <td>
                        <form th:action="@{/addRowItem}" th:method="get">
                          <button type="submit" onclick="added()">Add</button>
                          <input type="hidden" name ="input" th:value="${item.id}"/>
                        </form>
                    </td>
                    <td>
                        <form th:action="@{/deleteRowItem}" th:method="get">
                          <button type="submit" onclick="removed()">Remove</button>
                          <input type="hidden" name ="input" th:value="${item.id}"/>
                        </form>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="2" align="right">Total</td>
                    <td th:text="'£'+${basketTotal}" align="center"></td>
                </tr>
            </tfoot>
        </table>
    </section>

    <script>
        // Customisations for the toastr
		toastr.options = {
			"positionClass": "toast-bottom-right",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		}

        /**
         * This function notifies the user that the item has been added to the basket.
         */
		function added() {
			toastr.success("Item added to basket!");
		}

		/**
		 * This function notifies the user that the item has been removed from the basket.
		 */
		function removed() {
		    toastr.success("Item removed from basket!");
		}

	</script>
</body>
</html>